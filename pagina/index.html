<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FantaPapa 2025</title>
    <style>
        :root {
            --primary: #800020;
            --secondary: #FFD700;
            --light: #f8f9fa;
            --dark: #343a40;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background-color: var(--light);
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            text-align: center;
            padding: 40px 0;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        header h1 {
            margin: 0;
            font-size: 3rem;
            font-weight: 700;
        }
        
        header p {
            font-size: 1.2rem;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .countdown {
            background-color: var(--secondary);
            color: var(--dark);
            display: inline-block;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            margin-top: 15px;
        }
        
        .nav-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .nav-tabs button {
            background: none;
            border: none;
            padding: 15px 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .nav-tabs button.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }
        
        .content-pane {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .content-pane.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .cardinal-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .cardinal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .cardinal-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .cardinal-card .info {
            padding: 15px;
        }
        
        .cardinal-card h3 {
            margin-top: 0;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .cardinal-card p {
            margin: 5px 0;
            font-size: 0.9rem;
            color: #666;
        }
        
        .cardinal-card input[type="checkbox"] {
            display: none;
        }
        
        .cardinal-card label {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 25px;
            height: 25px;
            background-color: white;
            border: 2px solid #ddd;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .cardinal-card input[type="checkbox"]:checked + label {
            background-color: var(--primary);
            border-color: var(--primary);
        }
        
        .cardinal-card input[type="checkbox"]:checked + label:after {
            content: '✓';
            color: white;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            font-size: 16px;
            line-height: 23px;
            text-align: center;
        }
        
        .stats {
            display: flex;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .stats span {
            background-color: #eee;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .registration-form {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .form-group input[type="text"],
        .form-group input[type="email"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .submit-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .submit-btn:hover {
            background-color: #600018;
        }
        
        .selection-info {
            background-color: var(--light);
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .rules {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .rules h2 {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        .teams {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .team-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .team-item:last-child {
            border-bottom: none;
        }
        
        .team-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .team-selection {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .team-cardinal {
            background-color: #f1f1f1;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            background-color: var(--dark);
            color: white;
        }
        
        .selected-count {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary);
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            z-index: 100;
        }
        
        @media (max-width: 768px) {
            .card-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .cardinal-card img {
                height: 150px;
            }
            
            .cardinal-card h3 {
                font-size: 1rem;
            }
            
            .cardinal-card p {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>FantaPapa 2025</h1>
            <p>Crea la tua squadra di Cardinali per il prossimo Conclave!</p>
            <div class="countdown" id="countdown">Conclave tra 8 giorni</div>
        </div>
    </header>
    
    <div class="container">
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="cardinali">Scegli Cardinali</button>
            <button class="tab-btn" data-tab="regolamento">Regolamento</button>
            <button class="tab-btn" data-tab="squadre">Squadre</button>
        </div>
        
        <div id="cardinali" class="content-pane active">
            <h2>Scegli la tua squadra di Cardinali</h2>
            <p>Seleziona fino a 5 cardinali che potrebbero diventare il prossimo Papa.</p>
            
            <form id="selection-form">
                <div class="card-container" id="cardinali-container">
                    <!-- Le schede dei cardinali saranno generate da JavaScript -->
                </div>
                
                <div class="selection-info">
                    <h3>La tua selezione</h3>
                    <p>Hai selezionato <span id="selection-count">0</span>/5 cardinali</p>
                </div>
                
                <div class="registration-form">
                    <div class="form-group">
                        <label for="nome">Nome Completo</label>
                        <input type="text" id="nome" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="nome-papale">Nome Papale (previsione)</label>
                        <input type="text" id="nome-papale" placeholder="Es: Francesco II, Giovanni Paolo III">
                    </div>
                    
                    <button type="submit" class="submit-btn">Registra la tua squadra</button>
                </div>
            </form>
            
            <div class="selected-count" id="selected-count">0/5</div>
        </div>
        
        <div id="regolamento" class="content-pane">
            <div class="rules">
                <h2>Regolamento del FantaPapa</h2>
                <h3>Come si gioca</h3>
                <p>Il FantaPapa è un gioco di previsione per l'elezione del nuovo Pontefice. Ogni partecipante seleziona una squadra di 5 cardinali che ritiene possano diventare il prossimo Papa.</p>
                
                <h3>Punteggi</h3>
                <ul>
                    <li><strong>100 punti</strong> - Se hai nella tua squadra il cardinale eletto Papa</li>
                    <li><strong>50 punti extra</strong> - Se hai previsto correttamente il nome papale</li>
                    <li><strong>25 punti</strong> - Per ogni cardinale nella tua squadra che ha ricevuto voti durante il conclave (se l'informazione sarà disponibile)</li>
                    <li><strong>10 punti</strong> - Se hai previsto correttamente il numero di scrutini necessari (±1)</li>
                </ul>
                
                <h3>Regole di partecipazione</h3>
                <ol>
                    <li>Ogni partecipante può registrare una sola squadra</li>
                    <li>Le squadre devono essere registrate prima dell'inizio del conclave</li>
                    <li>Una volta registrata, la squadra non può essere modificata</li>
                    <li>La classifica finale sarà pubblicata dopo l'elezione del nuovo Papa</li>
                </ol>
            </div>
        </div>
        
        <div id="squadre" class="content-pane">
            <div class="teams">
                <h2>Squadre Registrate</h2>
                <p>Le squadre registrate saranno visibili qui non appena confermate.</p>
                
                <div id="teams-container">
                    <!-- Le squadre saranno generate da JavaScript o popolate manualmente -->
                    
                    <div class="team-item">
                        <div class="team-name">Marco Rossi</div>
                        <div class="team-selection">
                            <span class="team-cardinal">Luis Antonio Tagle</span>
                            <span class="team-cardinal">Matteo Zuppi</span>
                            <span class="team-cardinal">Óscar Rodríguez Maradiaga</span>
                            <span class="team-cardinal">Robert Sarah</span>
                            <span class="team-cardinal">Péter Erdő</span>
                        </div>
                        <div>Nome papale previsto: <strong>Leone XIV</strong></div>
                    </div>
                    
                    <div class="team-item">
                        <div class="team-name">Giulia Bianchi</div>
                        <div class="team-selection">
                            <span class="team-cardinal">Pietro Parolin</span>
                            <span class="team-cardinal">Christoph Schönborn</span>
                            <span class="team-cardinal">Sean Patrick O'Malley</span>
                            <span class="team-cardinal">Matteo Zuppi</span>
                            <span class="team-cardinal">Marc Ouellet</span>
                        </div>
                        <div>Nome papale previsto: <strong>Giovanni XXIV</strong></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>FantaPapa 2025 - Un gioco di previsione per l'elezione del nuovo Papa</p>
        </div>
    </footer>
    
    <script>
        // Dati dei cardinali papabili
        const cardinali = [
            {
                id: 1,
                nome: "Luis Antonio Tagle",
                eta: 67,
                paese: "Filippine",
                ruolo: "Prefetto del Dicastero per l'Evangelizzazione",
                imageUrl: "/api/placeholder/400/320",
                continente: "Asia"
            },
            {
                id: 2,
                nome: "Pietro Parolin",
                eta: 70,
                paese: "Italia",
                ruolo: "Segretario di Stato della Santa Sede",
                imageUrl: "/api/placeholder/400/320",
                continente: "Europa"
            },
            {
                id: 3,
                nome: "Matteo Zuppi",
                eta: 66,
                paese: "Italia",
                ruolo: "Arcivescovo di Bologna",
                imageUrl: "/api/placeholder/400/320",
                continente: "Europa"
            },
            {
                id: 4,
                nome: "Robert Sarah",
                eta: 79,
                paese: "Guinea",
                ruolo: "Prefetto emerito della Congregazione per il Culto Divino",
                imageUrl: "/api/placeholder/400/320",
                continente: "Africa"
            },
            {
                id: 5,
                nome: "Péter Erdő",
                eta: 72,
                paese: "Ungheria",
                ruolo: "Arcivescovo di Esztergom-Budapest",
                imageUrl: "/api/placeholder/400/320",
                continente: "Europa"
            },
            {
                id: 6,
                nome: "Christoph Schönborn",
                eta: 79,
                paese: "Austria",
                ruolo: "Arcivescovo di Vienna",
                imageUrl: "/api/placeholder/400/320",
                continente: "Europa"
            },
            {
                id: 7,
                nome: "Sean Patrick O'Malley",
                eta: 80,
                paese: "Stati Uniti",
                ruolo: "Arcivescovo di Boston",
                imageUrl: "/api/placeholder/400/320",
                continente: "Nord America"
            },
            {
                id: 8,
                nome: "Marc Ouellet",
                eta: 80,
                paese: "Canada",
                ruolo: "Prefetto emerito del Dicastero per i Vescovi",
                imageUrl: "/api/placeholder/400/320",
                continente: "Nord America"
            },
            {
                id: 9,
                nome: "Óscar Rodríguez Maradiaga",
                eta: 81,
                paese: "Honduras",
                ruolo: "Arcivescovo emerito di Tegucigalpa",
                imageUrl: "/api/placeholder/400/320",
                continente: "Centro America"
            },
            {
                id: 10,
                nome: "Gérald Lacroix",
                eta: 67,
                paese: "Canada",
                ruolo: "Arcivescovo di Québec",
                imageUrl: "/api/placeholder/400/320",
                continente: "Nord America"
            },
            {
                id: 11,
                nome: "Odilo Pedro Scherer",
                eta: 75,
                paese: "Brasile",
                ruolo: "Arcivescovo di San Paolo",
                imageUrl: "/api/placeholder/400/320",
                continente: "Sud America"
            },
            {
                id: 12,
                nome: "Angelo De Donatis",
                eta: 70,
                paese: "Italia",
                ruolo: "Vicario Generale di Sua Santità per la Diocesi di Roma",
                imageUrl: "/api/placeholder/400/320",
                continente: "Europa"
            }
        ];

        // Popolamento delle schede dei cardinali
        document.addEventListener('DOMContentLoaded', function() {
            const cardinaliContainer = document.getElementById('cardinali-container');
            
            cardinali.forEach(cardinale => {
                const cardElement = document.createElement('div');
                cardElement.className = 'cardinal-card';
                cardElement.innerHTML = `
                    <img src="${cardinale.imageUrl}" alt="${cardinale.nome}">
                    <input type="checkbox" id="cardinal-${cardinale.id}" name="cardinali" value="${cardinale.id}">
                    <label for="cardinal-${cardinale.id}"></label>
                    <div class="info">
                        <h3>${cardinale.nome}</h3>
                        <p>${cardinale.eta} anni</p>
                        <p>${cardinale.paese}</p>
                        <p>${cardinale.ruolo}</p>
                        <div class="stats">
                            <span>${cardinale.continente}</span>
                        </div>
                    </div>
                `;
                cardinaliContainer.appendChild(cardElement);
            });
            
            // Gestione della navigazione a schede
            const tabButtons = document.querySelectorAll('.tab-btn');
            const contentPanes = document.querySelectorAll('.content-pane');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tab = button.getAttribute('data-tab');
                    
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    contentPanes.forEach(pane => pane.classList.remove('active'));
                    
                    button.classList.add('active');
                    document.getElementById(tab).classList.add('active');
                });
            });
            
            // Gestione della selezione dei cardinali
            const checkboxes = document.querySelectorAll('input[name="cardinali"]');
            const selectionCount = document.getElementById('selection-count');
            const selectedCount = document.getElementById('selected-count');
            
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const checkedCount = document.querySelectorAll('input[name="cardinali"]:checked').length;
                    
                    if (checkedCount > 5) {
                        checkbox.checked = false;
                        alert('Puoi selezionare al massimo 5 cardinali!');
                        return;
                    }
                    
                    selectionCount.textContent = checkedCount;
                    selectedCount.textContent = `${checkedCount}/5`;
                });
            });
            
            // Gestione dell'invio del form
            document.getElementById('selection-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const checkedCount = document.querySelectorAll('input[name="cardinali"]:checked').length;
                
                if (checkedCount === 0) {
                    alert('Seleziona almeno un cardinale!');
                    return;
                }
                
                const nome = document.getElementById('nome').value;
                const email = document.getElementById('email').value;
                const nomePapale = document.getElementById('nome-papale').value;
                
                const selectedCardinalsIds = Array.from(document.querySelectorAll('input[name="cardinali"]:checked'))
                    .map(checkbox => parseInt(checkbox.value));
                
                const selectedCardinalsNames = selectedCardinalsIds.map(id => 
                    cardinali.find(cardinale => cardinale.id === id).nome
                );
                
                // Mostra un loader o messaggio di caricamento
                const submitBtn = document.querySelector('.submit-btn');
                const originalBtnText = submitBtn.textContent;
                submitBtn.textContent = 'Invio in corso...';
                submitBtn.disabled = true;
                
                // Prepara i dati per Google Sheets
                const formData = new FormData();
                formData.append('nome', nome);
                formData.append('email', email);
                formData.append('cardinali', selectedCardinalsNames.join(', '));
                formData.append('nomePapale', nomePapale);
                formData.append('timestamp', new Date().toISOString());
                
                // URL dello script Google Apps Script (dovrà essere sostituito con quello reale)
                const scriptURL = 'INSERISCI_URL_SCRIPT_QUI';
                
                // Invia i dati a Google Sheets
                fetch(scriptURL, {
                    method: 'POST',
                    body: formData
                })
                .then(response => {
                    if (response.ok) {
                        // Mostra conferma e aggiorna la UI
                        alert(`Grazie ${nome}! La tua squadra è stata registrata con successo.`);
                        
                        // Aggiorna la lista delle squadre (opzionale)
                        const teamsContainer = document.getElementById('teams-container');
                        const newTeam = document.createElement('div');
                        newTeam.className = 'team-item';
                        newTeam.innerHTML = `
                            <div class="team-name">${nome}</div>
                            <div class="team-selection">
                                ${selectedCardinalsNames.map(name => `<span class="team-cardinal">${name}</span>`).join('')}
                            </div>
                            <div>Nome papale previsto: <strong>${nomePapale}</strong></div>
                        `;
                        teamsContainer.appendChild(newTeam);
                        
                        // Reset del form
                        document.getElementById('selection-form').reset();
                        document.querySelectorAll('input[name="cardinali"]:checked').forEach(checkbox => {
                            checkbox.checked = false;
                        });
                        selectionCount.textContent = '0';
                        selectedCount.textContent = '0/5';
                    } else {
                        throw new Error('Errore nell\'invio dei dati');
                    }
                })
                .catch(error => {
                    console.error('Errore:', error);
                    alert('Si è verificato un errore durante la registrazione. Riprova più tardi.');
                })
                .finally(() => {
                    // Ripristina il pulsante
                    submitBtn.textContent = originalBtnText;
                    submitBtn.disabled = false;
                });
            });
        });
    </script>
</body>
</html>